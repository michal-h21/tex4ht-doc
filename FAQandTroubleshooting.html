<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head><title>9 FAQ and Troubleshooting</title> 
<meta charset='utf-8' /> 
<meta name='generator' content='TeX4ht (https://tug.org/tex4ht/)' /> 
<meta name='viewport' content='width=device-width,initial-scale=1' /> 
<link href='tex4ht-doc.css' type='text/css' rel='stylesheet' /> 
<meta name='src' content='tex4ht-doc.tex' /> 
<link href='style.css' type='text/css' rel='stylesheet' /> 
</head><body>
<nav class='TOC'><span class='chapterToc'>1 <a href='Introduction.html#x2-10001'>Introduction</a></span><span class='chapterToc'>2 <a href='BasicTutorial.html#x3-30002'>Basic Tutorial</a></span><span class='chapterToc'>3 <a href='Howto.html#x4-100003'>How to</a></span><span class='chapterToc'>4 <a href='CallingCommands.html#x5-330004'>Calling Commands</a></span><span class='chapterToc'>5 <a href='OutputFormats.html#x6-380005'>Output Formats</a></span><span class='chapterToc'>6 <a href='texfourhtOptions.html#x7-390006'><code>TeX4ht</code> Options</a></span><span class='chapterToc'>7 <a href='Configurations.html#x8-410007'>Configurations</a></span><span class='chapterToc'>8 <a href='Make4htBuildFiles.html#x9-850008'>Make4ht Build Files</a></span><span class='chapterToc'>9 <a href='#x10-890009'>FAQ and Troubleshooting</a></span><span class='sectionToc'>9.1 <a href='#x10-900009.1'>General Advice</a></span><span class='sectionToc'>9.2 <a href='#x10-910009.2'>Compilation Errors</a></span><span class='sectionToc'>9.3 <a href='#x10-920009.3'>DOM Processing Errors</a></span><span class='sectionToc'>9.4 <a href='#x10-930009.4'>Math Issues</a></span><span class='subsectionToc'>9.4.1 <a href='#x10-940009.4.1'>Problems With <span class='emph'><code>MathML</code></span></a></span><span class='chapterToc'>10 <a href='ForDevelopers.html#x11-9500010'>For Developers</a></span><span class='chapterToc'>11 <a href='Glossary.html#x12-10600011'>Glossary</a></span><span class='chapterToc'>12 <a href='Bibliography.html#x13-10700012'>Bibliography</a></span><span class='chapterToc'>13 <a href='Index.html#x14-10800013'>Index</a></span><span class='chapterToc'>14 <a href='Changes.html#x15-10900014'>Changes</a></span></nav> 
<main class='main-content'> 
<nav class='crosslinks-top'> [<a href='Make4htBuildFiles.html'>prev</a>] [<a href='tex4ht-doc.html#FAQandTroubleshooting.html'>up</a>] [<a href='ForDevelopers.html'>next</a>] </nav> 
<h2 class='chapterHead'><span class='titlemark'>Chapter 9</span><br /><a id='x10-890009'></a>FAQ and Troubleshooting</h2>
<h3 class='sectionHead'><span class='titlemark'>9.1   </span> <a id='x10-900009.1'></a>General Advice</h3>
<!-- l. 4 --><p class='noindent'>In general, don’t postpone your conversion to the last moment. As it is quite common
to produce ebook or HTML versions of LaTeX documents these days, it is best to
prepare this process as soon as possible.
</p><!-- l. 8 --><p class='indent'>   It is much easier to fix errors as soon as they appear. Often, one issue can cause
many other issues, and it can be really hard to find the culprit.
</p><!-- l. 11 --><p class='indent'>   It is a good idea to compile your document using <code>TeX4ht</code> every time you add a
new package to your document preamble, as some packages may clash. You
may also find that you will need a different definitions for some commands
for the HTML conversion, as the version suitable for PDF produce some
artifacts from drawing commands. These issues are also best to fix as soon as
possible.
</p><!-- l. 17 --><p class='noindent'>
</p>   
<h3 class='sectionHead'><span class='titlemark'>9.2   </span> <a id='x10-910009.2'></a>Compilation Errors</h3>
<!-- l. 21 --><p class='noindent'><span class='textbf'>Packages that cause issues</span> <code>TeX4ht</code> can clash with other packages sometimes. If
you don’t need features the problematic package provides (typically, they modify
stuff that makes sense in the PDF output, but not in HTML, like page headers, fancy
section titles, etc.), it is often easiest to disable their loading when <code>TeX4ht</code> is
active.
</p><!-- l. 27 --><p class='indent'>   There are multiple ways how to conditionally suppress package loading, but the
easiest way is to just add the following to your document preamble:
</p>   
<figure role='doc-example' class='texsource'>
                                                                  

                                                                  
<pre id='fancyvrb62' class='fancyvrb'><a id='x10-91007r1'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\ifdefined\HCode</span></span> 
<a id='x10-91009r2'></a><span class='rm-lmtt-10'>... code for TeX4ht</span> 
<a id='x10-91011r3'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\else</span></span> 
<a id='x10-91013r4'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\usepackage</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>foo</span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span> 
<a id='x10-91015r5'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\fi</span></span></pre>
</figure>
<!-- l. 39 --><p class='noindent'><span class='textbf'>Fragile commands</span> Some commands may cause compilation errors when used in
<code>\section</code> or <code>\caption</code> arguments. These errors usually show when the document
preamble stops and auxilary files are loaded. They can be quite hard to
debug.
</p><!-- l. 44 --><p class='indent'>   Consider the following example:
</p>   
<figure role='doc-example' class='texsource'>
<pre id='fancyvrb63' class='fancyvrb'><a id='x10-91021r1'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>figure</span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span><span class='rm-lmtt-10'>[h]</span> 
<a id='x10-91023r2'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\includegraphics</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>example-image</span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span> 
<a id='x10-91025r3'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\caption</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-b73838'><span class='rm-lmtt-10'>$</span></span><span class='textcolor-af3f3f'><span class='rm-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{array}{c c} hello &amp; world</span></span><span class='textcolor-af3f3f'><span class='rm-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{array}</span></span><span class='textcolor-b73838'><span class='rm-lmtt-10'>$</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span> 
<a id='x10-91027r4'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>figure</span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 53 --><p class='indent'>   It produces a fatal error:
</p>   
<figure role='doc-example' class='shellcommand'>
<pre id='fancyvrb64' class='fancyvrb'><a id='x10-91036r1'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   htlatex: Compilation errors in the htlatex run</span> 
<a id='x10-91038r2'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   htlatex: Filename     Line    Message</span> 
<a id='x10-91040r3'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   htlatex: ./minimal.tex        </span><span class='textcolor-444444'><span class='rm-lmtt-10'>7</span></span><span class='rm-lmtt-10'>        Argument of </span><span class='textcolor-708e30'><span class='rm-lmtt-10'>\i</span></span><span class='rm-lmtt-10'>m:g has an extra </span><span class='textcolor-656565'><span class='rm-lmtt-10'>}</span></span><span class='rm-lmtt-10'>.</span> 
<a id='x10-91042r4'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   htlatex: ./minimal.tex        </span><span class='textcolor-444444'><span class='rm-lmtt-10'>7</span></span><span class='rm-lmtt-10'>        Paragraph ended before </span><span class='textcolor-708e30'><span class='rm-lmtt-10'>\i</span></span><span class='rm-lmtt-10'>m:g was complete.</span> 
<a id='x10-91044r5'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   htlatex: ?    ?        Incomplete </span><span class='textcolor-708e30'><span class='rm-lmtt-10'>\i</span></span><span class='rm-lmtt-10'>ffalse</span><span class='textcolor-878787'><span class='rm-lmtt-10'>;</span></span><span class='rm-lmtt-10'> all text was ignored after line </span><span class='textcolor-444444'><span class='rm-lmtt-10'>7</span></span><span class='rm-lmtt-10'>.</span> 
<a id='x10-91046r6'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   htlatex: ?    ?        Emergency stop.</span> 
<a id='x10-91048r7'></a><span class='textcolor-656565'><span class='rm-lmtt-10'>[</span></span><span class='rm-lmtt-10'>FATAL</span><span class='textcolor-656565'><span class='rm-lmtt-10'>]</span></span><span class='rm-lmtt-10'>   make4ht-lib: Fatal error. Command htlatex returned </span><span class='textcolor-387f38'><span class='rm-lmtt-10'>exit</span></span><span class='rm-lmtt-10'> code </span><span class='textcolor-444444'><span class='rm-lmtt-10'>1</span></span></pre>
</figure>
<!-- l. 65 --><p class='indent'>   You can get more context for this error using the <span class='obeylines-h'><code>-a debug</code></span> option for
<span class='emph'>make4ht</span>:
</p>   
<figure role='doc-example' class='shellcommand'>
<pre id='fancyvrb65' class='fancyvrb'><a id='x10-91054r1'></a><span class='rm-lmtt-10'>! Argument of </span><span class='textcolor-708e30'><span class='rm-lmtt-10'>\i</span></span><span class='rm-lmtt-10'>m:g has an extra </span><span class='textcolor-656565'><span class='rm-lmtt-10'>}</span></span><span class='rm-lmtt-10'>.</span> 
<a id='x10-91056r2'></a><span class='rm-lmtt-10'>&lt;inserted text&gt;</span> 
<a id='x10-91058r3'></a><span class='rm-lmtt-10'>                </span><span class='textcolor-708e30'><span class='rm-lmtt-10'>\p</span></span><span class='rm-lmtt-10'>ar</span> 
<a id='x10-91060r4'></a><span class='rm-lmtt-10'>l.7 ...egin</span><span class='textcolor-656565'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>array</span><span class='textcolor-656565'><span class='rm-lmtt-10'>}{</span></span><span class='rm-lmtt-10'>c c</span><span class='textcolor-656565'><span class='rm-lmtt-10'>}</span></span><span class='rm-lmtt-10'> hello </span><span class='textcolor-878787'><span class='rm-lmtt-10'>&amp;</span></span><span class='rm-lmtt-10'> world</span><span class='textcolor-708e30'><span class='rm-lmtt-10'>\e</span></span><span class='rm-lmtt-10'>nd</span><span class='textcolor-656565'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>array</span><span class='textcolor-656565'><span class='rm-lmtt-10'>}}</span></span></pre>
</figure>
<!-- l. 74 --><p class='indent'>   The error itself is pretty cryptic, but you can see that the cause is in
</p>   
<figure role='doc-example' class='texsource'>
<pre id='fancyvrb66' class='fancyvrb'><a id='x10-91063r1'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\caption</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-b73838'><span class='rm-lmtt-10'>$</span></span><span class='textcolor-af3f3f'><span class='rm-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{array}{c c} hello &amp; world</span></span><span class='textcolor-af3f3f'><span class='rm-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{array}</span></span><span class='textcolor-b73838'><span class='rm-lmtt-10'>$</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 80 --><p class='indent'>   The issue is that some commands needs to be protected when used in parameters
of <code>\section</code> or <code>\caption</code> commands. There are two possible fixes. First is to use the
<code>\protect</code> command:
</p>   
<figure role='doc-example' class='texsource'>
                                                                  

                                                                  
<pre id='fancyvrb67' class='fancyvrb'><a id='x10-91066r1'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\caption</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-b73838'><span class='rm-lmtt-10'>$</span></span><span class='textcolor-af3f3f'><span class='rm-lmtt-10'>\protect\begin</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{array}{c c} hello &amp; world</span></span><span class='textcolor-af3f3f'><span class='rm-lmtt-10'>\protect\end</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{array}</span></span><span class='textcolor-b73838'><span class='rm-lmtt-10'>$</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 88 --><p class='indent'>   Other fix is to use the <span class='emph'>writetoc</span> configuration:
</p>   
<figure role='doc-example' class='texsource'>
<pre id='fancyvrb68' class='fancyvrb'><a id='x10-91072r1'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\Configure</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='rm-lmtt-10'>writetoc</span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}{</span></span><span class='textcolor-878787'><span class='textit'>%</span></span> 
<a id='x10-91074r2'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\def\begin</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='rm-lmtt-10'>\detokenize</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='rm-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}}</span></span> 
<a id='x10-91076r3'></a><span class='textcolor-2838af'><span class='rm-lmtt-10'>\def\end</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='rm-lmtt-10'>\detokenize</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='rm-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='rm-lmtt-10'>}}</span></span> 
<a id='x10-91078r4'></a><span class='textcolor-387f38'><span class='rm-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 97 --><p class='indent'>   In this configuration, we redefine <code>\begin</code> and <code>\end</code> commands to print their
verbatim contents when they are used. They will be then written to the auxilary file
thanks to this configuration. Redefinitions that happen in <span class='emph'>writetoc</span> are active only
when stuff is written to the auxilary files, so you don’t need to worry that it will
break normal handling of environments.
</p><!-- l. 105 --><p class='noindent'>
</p>   
<h3 class='sectionHead'><span class='titlemark'>9.3   </span> <a id='x10-920009.3'></a>DOM Processing Errors</h3>
<!-- l. 108 --><p class='noindent'><code>TeX4ht</code> post-process generated HTML and XML files using LuaXML.
</p><!-- l. 110 --><p class='noindent'><span class='textbf'>Incorrect handling of paragraphs</span>
</p><!-- l. 114 --><p class='noindent'>
</p>   
<h3 class='sectionHead'><span class='titlemark'>9.4   </span> <a id='x10-930009.4'></a>Math Issues</h3>
<!-- l. 115 --><p class='noindent'>
</p>   
<h4 class='subsectionHead'><span class='titlemark'>9.4.1   </span> <a id='x10-940009.4.1'></a>Problems With <span class='emph'><code>MathML</code></span></h4>
<!-- l. 117 --><p class='noindent'><span class='textbf'>Single delimiters</span> Use of single delimiters like <code>$\langle$</code> may result in
invalid <code>MathML</code> code. <code>TeX4ht</code> can try to fix that using the <span class='emph'>mathml-</span> option.
                                                                  

                                                                  
</p>   
<nav class='crosslinks-bottom'>[<a href='Make4htBuildFiles.html'>prev</a>] [<a href='tex4ht-doc.html#FAQandTroubleshooting.html'>up</a>] [<a href='ForDevelopers.html'>next</a>] </nav>   </main><p><script src='/js/libs/goatcounter.js' data-goatcounter='https://kodymirus.goatcounter.com/count'></script></p> 
 
</body> 
</html>