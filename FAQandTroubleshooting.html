<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head><title>9 FAQ and Troubleshooting</title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='tex4ht-doc.css' rel='stylesheet' type='text/css' /> 
<meta content='tex4ht-doc.tex' name='src' /> 
<link href='style.css' rel='stylesheet' type='text/css' /> 
</head><body>
<nav class='TOC'>   
<span class='chapterToc'>1 <a href='Introduction.html#introduction'>Introduction</a></span>
 
<span class='chapterToc'>2 <a href='BasicTutorial.html#basic-tutorial'>Basic Tutorial</a></span>
 
 
 
 
 
 
 
<span class='chapterToc'>3 <a href='Howto.html#how-to'>How to</a></span>
 
  
  
  
 
  
  
  
  
 
  
  
  
  
 
 
 
  
  
  
  
  
<span class='chapterToc'>4 <a href='CallingCommands.html#calling-commands'>Calling Commands</a></span>
 
 
  
<span class='chapterToc'>5 <a href='OutputFormats.html#output-formats'>Output Formats</a></span>
<span class='chapterToc'>6 <a href='texfourhtOptions.html#-texht-options1'><code>TeX4ht</code> Options</a></span>
 
<span class='chapterToc'>7 <a href='Configurations.html#configurations2'>Configurations</a></span>
 
  
  
                                                                  

                                                                  
 
 
  
  
  
  
 
 
 
 
 
  
 
 
 
 
 
  
 
  
  
 
 
  
  
  
 
 
 
  
  
  
 
 
 
  
<span class='chapterToc'>8 <a href='Make4htBuildFiles.html#makeht-build-files'>Make4ht Build Files</a></span>
 
 
 
<span class='chapterToc'>9 <a href='#faq-and-troubleshooting'>FAQ and Troubleshooting</a></span>
 <span class='sectionToc'>9.1 <a href='#general-advice'>General Advice</a></span>
 <span class='sectionToc'>9.2 <a href='#compilation-errors'>Compilation Errors</a></span>
 <span class='sectionToc'>9.3 <a href='#dom-processing-errors'>DOM Processing Errors</a></span>
 <span class='sectionToc'>9.4 <a href='#math-issues'>Math Issues</a></span>
  <span class='subsectionToc'>9.4.1 <a href='#problems-with-mathml'>Problems With <span class='emph'><code>MathML</code></span></a></span>
                                                                  

                                                                  
<span class='chapterToc'>10 <a href='ForDevelopers.html#for-developers'>For Developers</a></span>
 
 
 
  
  
 
  
 
 
  
<span class='chapterToc'>11 <a href='Glossary.html#glossary'>Glossary</a></span>
<span class='chapterToc'>12 <a href='Bibliography.html#bibliography'>Bibliography</a></span>
<span class='chapterToc'>13 <a href='Index.html#index'>Index</a></span>
<span class='chapterToc'>14 <a href='Changes.html#changes'>Changes</a></span>
 
   
</nav> 
<main class='main-content'> 
<nav class='crosslinks-top'> [<a href='Make4htBuildFiles.html'>prev</a>] [<a href='tex4ht-doc.html#FAQandTroubleshooting.html'>up</a>] [<a href='ForDevelopers.html'>next</a>] </nav> 
<h2 class='chapterHead' id='faq-and-troubleshooting'><span class='titlemark'>Chapter 9</span><br /><a id='x10-900009'></a>FAQ and Troubleshooting</h2>
<h3 class='sectionHead' id='general-advice'><span class='titlemark'>9.1   </span> <a id='x10-910009.1'></a>General Advice</h3>
<!-- l. 4 --><p class='noindent'>In general, don’t postpone your conversion to the last moment. As you will most
likely want to produce ebook or HTML versions of LaTeX documents these days,
you should try the conversion of your document from the beginning.
</p><!-- l. 8 --><p class='indent'>   It is much easier to fix errors as soon as they appear. Often, one issue
can cause many issues that follows, and it can be really hard to find the
culprit.
</p><!-- l. 11 --><p class='indent'>   Compile your document using <code>TeX4ht</code> every time you add a new package, as
the included code can break other packages or even LaTeX kernel. You
may also find that you will need a different definitions for some commands
for the HTML conversion, as the version suitable for PDF produce some
artifacts from drawing commands. These issues are also best to fix as soon as
possible.
</p><!-- l. 17 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='compilation-errors'><span class='titlemark'>9.2   </span> <a id='x10-920009.2'></a>Compilation Errors</h3>
<!-- l. 21 --><p class='noindent'><span class='textbf'>Packages that cause issues</span> <code>TeX4ht</code> can sometimes clash with other packages. If
you don’t need features the problematic package provides (typically, they modify
stuff that makes sense in the PDF output, but not in HTML, like page headers, fancy
section titles, etc.), an easiest fix is to disable their loading when <code>TeX4ht</code> is
active.
</p><!-- l. 27 --><p class='indent'>   The easiest way to disable package from loading is to add the following condition
to your document preamble:
                                                                  

                                                                  
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb105'><a id='x10-92007r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\ifdefined\HCode</span></span> 
<a id='x10-92009r2'></a><span class='ec-lmtt-10'>... code for TeX4ht</span> 
<a id='x10-92011r3'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\else</span></span> 
<a id='x10-92013r4'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\usepackage</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>foo</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span> 
<a id='x10-92015r5'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\fi</span></span></pre>
</figure>
<!-- l. 39 --><p class='noindent'><span class='textbf'>Fragile commands</span> Some commands may cause compilation errors when used in
<code>\section</code> or <code>\caption</code> arguments. These errors usually show when the document
preamble stops and auxilary files are loaded. They can be quite hard to
debug.
</p><!-- l. 44 --><p class='indent'>   Consider the following example:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb106'><a id='x10-92021r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>figure</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span><span class='ec-lmtt-10'>[h]</span> 
<a id='x10-92023r2'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\includegraphics</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>example-image</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span> 
<a id='x10-92025r3'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\caption</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>$</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{array}{c c} hello &amp; world</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{array}</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>$</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span> 
<a id='x10-92027r4'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>figure</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 53 --><p class='indent'>   It produces a fatal error:
</p>   
<figure class='shellcommand' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb107'><a id='x10-92036r1'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   htlatex: Compilation errors </span><span class='textcolor-2838af'><span class='ec-lmtt-10'>in</span></span><span class='ec-lmtt-10'> the htlatex run</span> 
<a id='x10-92038r2'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   htlatex: Filename     Line    Message</span> 
<a id='x10-92040r3'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   htlatex: ./minimal.tex        </span><span class='textcolor-444444'><span class='ec-lmtt-10'>7</span></span><span class='ec-lmtt-10'>        Argument of </span><span class='textcolor-708e30'><span class='ec-lmtt-10'>\i</span></span><span class='ec-lmtt-10'>m:g has an extra </span><span class='textcolor-656565'><span class='ec-lmtt-10'>}</span></span><span class='ec-lmtt-10'>.</span> 
<a id='x10-92042r4'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   htlatex: ./minimal.tex        </span><span class='textcolor-444444'><span class='ec-lmtt-10'>7</span></span><span class='ec-lmtt-10'>        Paragraph ended before </span><span class='textcolor-708e30'><span class='ec-lmtt-10'>\i</span></span><span class='ec-lmtt-10'>m:g was complete.</span> 
<a id='x10-92044r5'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   htlatex: ?    ?        Incomplete </span><span class='textcolor-708e30'><span class='ec-lmtt-10'>\i</span></span><span class='ec-lmtt-10'>ffalse</span><span class='textcolor-878787'><span class='ec-lmtt-10'>;</span></span><span class='ec-lmtt-10'> all text was ignored after line </span><span class='textcolor-444444'><span class='ec-lmtt-10'>7</span></span><span class='ec-lmtt-10'>.</span> 
<a id='x10-92046r6'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>ERROR</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   htlatex: ?    ?        Emergency stop.</span> 
<a id='x10-92048r7'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>FATAL</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'>   make4ht-lib: Fatal error. Command htlatex returned </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>exit</span></span><span class='ec-lmtt-10'> code </span><span class='textcolor-444444'><span class='ec-lmtt-10'>1</span></span></pre>
</figure>
<!-- l. 65 --><p class='indent'>   You can get more context for this error using the <span class='obeylines-h'><code>-a debug</code></span> option for
<code>make4ht</code>:
</p>   
<figure class='shellcommand' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb108'><a id='x10-92054r1'></a><span class='ec-lmtt-10'>! Argument of </span><span class='textcolor-708e30'><span class='ec-lmtt-10'>\i</span></span><span class='ec-lmtt-10'>m:g has an extra </span><span class='textcolor-656565'><span class='ec-lmtt-10'>}</span></span><span class='ec-lmtt-10'>.</span> 
<a id='x10-92056r2'></a><span class='ec-lmtt-10'>&lt;inserted text&gt;</span> 
<a id='x10-92058r3'></a><span class='ec-lmtt-10'>                </span><span class='textcolor-708e30'><span class='ec-lmtt-10'>\p</span></span><span class='ec-lmtt-10'>ar</span> 
<a id='x10-92060r4'></a><span class='ec-lmtt-10'>l.7 ...egin</span><span class='textcolor-656565'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>array</span><span class='textcolor-656565'><span class='ec-lmtt-10'>}{</span></span><span class='ec-lmtt-10'>c c</span><span class='textcolor-656565'><span class='ec-lmtt-10'>}</span></span><span class='ec-lmtt-10'> hello </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&amp;</span></span><span class='ec-lmtt-10'> world</span><span class='textcolor-708e30'><span class='ec-lmtt-10'>\e</span></span><span class='ec-lmtt-10'>nd</span><span class='textcolor-656565'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>array</span><span class='textcolor-656565'><span class='ec-lmtt-10'>}}</span></span></pre>
</figure>
<!-- l. 74 --><p class='indent'>   The error itself is pretty cryptic, but you can see that the cause is in
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb109'><a id='x10-92063r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\caption</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>$</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{array}{c c} hello &amp; world</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{array}</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>$</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 80 --><p class='indent'>   The issue is that some commands needs to be protected when used in parameters
of <code>\section</code> or <code>\caption</code> commands. There are two possible fixes. First is to use the
<code>\protect</code> command:
                                                                  

                                                                  
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb110'><a id='x10-92066r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\caption</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>$</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>\protect\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{array}{c c} hello &amp; world</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>\protect\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{array}</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>$</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 88 --><p class='indent'>   Other fix is to use the <span class='emph'>writetoc</span> configuration:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb111'><a id='x10-92072r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\Configure</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>writetoc</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}{</span></span><span class='textcolor-878787'><span class='textit'>%</span></span> 
<a id='x10-92074r2'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\def\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\detokenize</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}}</span></span> 
<a id='x10-92076r3'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\def\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\detokenize</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}}</span></span> 
<a id='x10-92078r4'></a><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 97 --><p class='indent'>   In this configuration, we redefine <code>\begin</code> and <code>\end</code> commands to print their
verbatim contents when they are used. They will be then written to the auxilary file
thanks to this configuration. Redefinitions that happen in <span class='emph'>writetoc</span> are active only
when stuff is written to the auxilary files, so you don’t need to worry that it will
break normal handling of environments.
</p><!-- l. 105 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='dom-processing-errors'><span class='titlemark'>9.3   </span> <a id='x10-930009.3'></a>DOM Processing Errors</h3>
<!-- l. 108 --><p class='noindent'><code>TeX4ht</code> post-process generated HTML and XML files using Lua filters. They fixes
various issues that are not possible fix on the TeX level, and also add some
additional features. For example, the <code>MathML</code> output relies on filters to produce valid
code.
</p><!-- l. 112 --><p class='indent'>   These filters use the LuaXML library for the processing. When the generated
HTML or XML file is not well-formed, you may get the following warning:
</p>   
<figure class='shellcommand' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb112'><a id='x10-93005r1'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>WARNING</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'> domfilter: DOM parsing of test.html failed:</span> 
<a id='x10-93007r2'></a><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='ec-lmtt-10'>WARNING</span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span><span class='ec-lmtt-10'> domfilter: /home/michal/texmf/scripts/lua/LuaXML/</span> 
<a id='x10-93009r3'></a><span class='ec-lmtt-10'>luaxml-mod-xml.lua:175: Unbalanced Tag </span><span class='textcolor-656565'><span class='ec-lmtt-10'>(</span></span><span class='ec-lmtt-10'>/p</span><span class='textcolor-656565'><span class='ec-lmtt-10'>)</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-656565'><span class='ec-lmtt-10'>[</span></span><span class='textcolor-af3f3f'><span class='ec-lmtt-10'>char</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-444444'><span class='ec-lmtt-10'>1353</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>]</span></span></pre>
</figure>
<!-- l. 122 --><p class='indent'>   This means that DOM parsing failed and filters cannot be applied. This will
result in incorrect file.
</p><!-- l. 124 --><p class='noindent'><span class='textbf'>Incorrect handling of paragraphs</span> Common cause of this issue is incorect
handling of paragraphs in commands that produce block level elements such as <code>&lt;div&gt;</code>
or <code>&lt;section&gt;</code> elements.
</p><!-- l. 128 --><p class='indent'>   Say that you have a following code in your document:
</p>   
<figure class='texsource' role='doc-example'>
                                                                  

                                                                  
<pre class='fancyvrb' id='fancyvrb113'><a id='x10-93018r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\newenvironment</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>test</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\itshape</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}{}</span></span> 
<a id='x10-93020r2'></a> 
<a id='x10-93022r3'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\begin</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>test</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span> 
<a id='x10-93024r4'></a><span class='ec-lmtt-10'>world</span> 
<a id='x10-93026r5'></a> 
<a id='x10-93028r6'></a><span class='ec-lmtt-10'>more paragraphs</span> 
<a id='x10-93030r7'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\end</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>test</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span></pre>
</figure>
<!-- l. 140 --><p class='indent'>   And that you configure the <span class='emph'>test</span> environment to to produce a custom <code>&lt;div&gt;</code>
element:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb114'><a id='x10-93033r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\ConfigureEnv</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>test</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\HCode</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>&lt;div class="test"&gt;</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}}{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\HCode</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>&lt;/div&gt;</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}}{}{}</span></span></pre>
</figure>
<!-- l. 146 --><p class='indent'>   This configuration will break the LuaXML parsing, as it produces invalid HTML
code:
</p>   
<figure class='htmlsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb115'><a id='x10-93041r1'></a><span class='textcolor-878787'><span class='textit'>&lt;!–l. 27–&gt;</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>"indent"</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>   </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>div</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>"test"</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span> 
<a id='x10-93043r2'></a><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>"cmti-12"</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>world</span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span> 
<a id='x10-93045r3'></a><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='textcolor-878787'><span class='textit'>&lt;!–l. 30–&gt;</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>"indent"</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>   </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span> 
<a id='x10-93047r4'></a><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ec-lmtt-10'>"cmti-12"</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>more paragraphs</span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span> 
<a id='x10-93049r5'></a><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>div</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span> 
<a id='x10-93051r6'></a><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span></pre>
</figure>
<!-- l. 157 --><p class='indent'>   The issue is that <code>&lt;p&gt;</code> elements are mismatched. It is necessary that closing <code>&lt;/p&gt;</code>
tag is inserted before <code>&lt;div&gt;</code> tag. You can use commands introduced in section
<a href='Configurations.html#paragraph-handling'>Paragraph Handling<!-- tex4ht:ref: sec:paragraph_handling  --></a> (<a href='Configurations.html#paragraph-handling'>7.3.3<!-- tex4ht:ref: sec:paragraph_handling  --></a>) for this task. The correct configuration can look like
this:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb116'><a id='x10-93055r1'></a><span class='textcolor-2838af'><span class='ec-lmtt-10'>\ConfigureEnv</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>test</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\ifvmode\IgnorePar\fi\EndP\HCode</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>&lt;div class="test"&gt;</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\par</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span> 
<a id='x10-93057r2'></a><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\ifvmode\IgnorePar\fi\EndP\HCode</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>{</span></span><span class='ec-lmtt-10'>&lt;/div&gt;</span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>\par</span></span><span class='textcolor-387f38'><span class='ec-lmtt-10'>}{}{}</span></span></pre>
</figure>
<!-- l. 166 --><p class='indent'>   The <code>\EndP</code> inserts closing <code>&lt;/p&gt;</code> tag. But new paragraph still could be
started before <code>&lt;div&gt;</code> if we are in the vertical mode, so we need to use also the
<code>\ifvmode\IgnorePar\fi</code> command. This will prevent starting of the new paragraph
too early. But we want to start a new paragraph after <code>&lt;div&gt;</code>, so we need to use
explicit <code>\par</code> after <code>\HCode</code>. Similar paragraph treatment is needed also for the
closing of the environment. The resulting HTML with this configuration is
correct:
</p>   
<figure class='htmlsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb117'><a id='x10-93063r1'></a><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>div</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ts1-lmtt10-'>'</span><span class='ec-lmtt-10'>test</span><span class='ts1-lmtt10-'>'</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span> 
<a id='x10-93065r2'></a><span class='textcolor-878787'><span class='textit'>&lt;!– l. 28 –&gt;</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ts1-lmtt10-'>'</span><span class='ec-lmtt-10'>indent</span><span class='ts1-lmtt10-'>'</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>   </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ts1-lmtt10-'>'</span><span class='ec-lmtt-10'>cmti-12</span><span class='ts1-lmtt10-'>'</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>world</span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span> 
<a id='x10-93067r3'></a><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='textcolor-878787'><span class='textit'>&lt;!– l. 30 –&gt;</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ts1-lmtt10-'>'</span><span class='ec-lmtt-10'>indent</span><span class='ts1-lmtt10-'>'</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>   </span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span><span class='ec-lmtt-10'> </span><span class='textcolor-387f38'><span class='ec-lmtt-10'>class</span></span><span class='textcolor-656565'><span class='ec-lmtt-10'>=</span></span><span class='textcolor-b73838'><span class='ts1-lmtt10-'>'</span><span class='ec-lmtt-10'>cmti-12</span><span class='ts1-lmtt10-'>'</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span><span class='ec-lmtt-10'>more paragraphs</span><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>span</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span> 
<a id='x10-93069r4'></a><span class='textcolor-878787'><span class='ec-lmtt-10'>&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>p</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;&lt;/</span></span><span class='textcolor-2838af'><span class='ec-lmtt-10'>div</span></span><span class='textcolor-878787'><span class='ec-lmtt-10'>&gt;</span></span></pre>
</figure>
                                                                  

                                                                  
<!-- l. 184 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='math-issues'><span class='titlemark'>9.4   </span> <a id='x10-940009.4'></a>Math Issues</h3>
<!-- l. 185 --><p class='noindent'>
</p>   
<h4 class='subsectionHead' id='problems-with-mathml'><span class='titlemark'>9.4.1   </span> <a id='x10-950009.4.1'></a>Problems With <span class='emph'><code>MathML</code></span></h4>
<!-- l. 187 --><p class='noindent'><span class='textbf'>Single delimiters</span> Use of single delimiters like <code>$\langle$</code> may result in
invalid <code>MathML</code> code. <code>TeX4ht</code> can try to fix that using the <span class='emph'>mathml-</span> option.
                                                                  

                                                                  
</p>   
<nav class='crosslinks-bottom'>[<a href='Make4htBuildFiles.html'>prev</a>] [<a href='tex4ht-doc.html#FAQandTroubleshooting.html'>up</a>] [<a href='ForDevelopers.html'>next</a>] </nav>   </main><p><script data-goatcounter='https://kodymirus.goatcounter.com/count' src='/js/libs/goatcounter.js'></script></p> 
 
</body> 
</html>