<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head><title>10 For Developers</title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='tex4ht-doc.css' rel='stylesheet' type='text/css' /> 
<meta content='tex4ht-doc.tex' name='src' /> 
<link href='style.css' rel='stylesheet' type='text/css' /> 
</head><body>
<nav class='TOC'>   
<span class='chapterToc'>1 <a href='Introduction.html#introduction'>Introduction</a></span>

<span class='chapterToc'>2 <a href='BasicTutorial.html#basic-tutorial'>Basic Tutorial</a></span>








<span class='chapterToc'>3 <a href='Howto.html#how-to'>How to</a></span>






















<span class='chapterToc'>4 <a href='CallingCommands.html#calling-commands'>Calling Commands</a></span>







<span class='chapterToc'>5 <a href='OutputFormats.html#output-formats'>Output Formats</a></span>
<span class='chapterToc'>6 <a href='texfourhtOptions.html#-texht-options1'><code class='texttt'>TeX4ht</code> Options</a></span>
                                                                  

                                                                  


<span class='chapterToc'>7 <a href='Configurations.html#configurations2'>Configurations</a></span>











































                                                                  

                                                                  



<span class='chapterToc'>8 <a href='Make4htBuildFiles.html#makeht-build-files'>Make4ht Build Files</a></span>



<span class='chapterToc'>9 <a href='FAQandTroubleshooting.html#faq-and-troubleshooting'>FAQ and Troubleshooting</a></span>





<span class='chapterToc'>10 <a href='#for-developers'>For Developers</a></span>
<span class='sectionToc'>10.1 <a href='#introduction1'>Introduction</a></span>
<span class='sectionToc'>10.2 <a href='#tutorial-basic-support-for-a-new-package'>Tutorial: Basic Support For a New Package</a></span>
<span class='sectionToc'>10.3 <a href='#two-types-of-ht-files'>Two types of .4ht files</a></span>
<span class='subsectionToc'>10.3.1 <a href='#inserting-configurable-hooks-for-packages'>Inserting configurable hooks for packages</a></span>
<span class='subsectionToc'>10.3.2 <a href='#configure-the-hooks-in-output-format-configuration-files'>Configure the hooks in output format configuration files</a></span>
<span class='sectionToc'>10.4 <a href='#how-to-add-support-for-a-package-to-the-texht-literate-sources'>How to add support for a package to the <code class='texttt'>TeX4ht</code> literate sources</a></span>
<span class='subsectionToc'>10.4.1 <a href='#example'>Example</a></span>
<span class='sectionToc'>10.5 <a href='#commands-usable-in-the-ht-files'>Commands Usable in the <code class='texttt'>.4ht</code> files</a></span>
<span class='sectionToc'>10.6 <a href='#protex'>ProTeX</a></span>
<span class='subsectionToc'>10.6.1 <a href='#protex1'>ProTeX</a></span>
<span class='chapterToc'>11 <a href='Glossary.html#glossary'>Glossary</a></span>
<span class='chapterToc'>12 <a href='Bibliography.html#bibliography'>Bibliography</a></span>
<span class='chapterToc'>13 <a href='Index.html#index'>Index</a></span>
<span class='chapterToc'>14 <a href='Changes.html#changes'>Changes</a></span>
 
   
</nav> 
<main class='main-content'> 
<nav class='crosslinks-top'> [<a href='FAQandTroubleshooting.html'>prev</a>] [<a href='tex4ht-doc.html#ForDevelopers.html'>up</a>] [<a href='Glossary.html'>next</a>] </nav> 
<h2 class='chapterHead' id='for-developers'><span class='titlemark'>Chapter 10</span><br /><a id='x11-11100010'></a>For Developers</h2>
<h3 class='sectionHead' id='introduction1'><span class='titlemark'>10.1   </span> <a id='x11-11200010.1'></a>Introduction</h3>
<!-- l. 3 --><p class='noindent'>This chapter deals with <code class='texttt'>TeX4ht</code> development. It starts with a tutorial for
basic
</p>   
<h3 class='sectionHead' id='tutorial-basic-support-for-a-new-package'><span class='titlemark'>10.2   </span> <a id='x11-11300010.2'></a>Tutorial: Basic Support For a New Package</h3>
<!-- l. 6 --><p class='noindent'>In this tutorial, we will try to show how to provide <code class='texttt'>TeX4ht</code> support for a simple
LaTeX package.
</p><!-- l. 10 --><p class='indent'>   <code class='texttt'>TeX4ht</code> tries to load a special <code class='texttt'>.4ht</code> file for each package loaded by LaTeX. This
special file can contain modifications to commands provided by the package, like
redefinitions of macros that cause clashes between the package and <code class='texttt'>TeX4ht</code>, and most
importantly they insert special macros, called hooks, that are then used to include
                                                                  

                                                                  
the output format tags.
</p><!-- l. 15 --><p class='indent'>   Let’s say that you have a custom package, called <code class='texttt'>mynote.sty</code>
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb150'><a id='x11-113006r1'></a><span class='textcolor-2838af'>\ProvidesPackage</span><span class='textcolor-387f38'>{</span>mynote<span class='textcolor-387f38'>}</span> 
<a id='x11-113008r2'></a><span class='textcolor-2838af'>\newcommand\notetitle</span><span class='textcolor-387f38'>{</span>Note:~<span class='textcolor-387f38'>}</span> 
<a id='x11-113010r3'></a><span class='textcolor-2838af'>\newcommand\note</span><span class='textcolor-387f38'>[1]{{</span><span class='textcolor-2838af'>\textcolor</span><span class='textcolor-387f38'>{</span>notecolor<span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\textbf</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\notetitle</span><span class='textcolor-387f38'>}}}</span>#1<span class='textcolor-387f38'>}</span> 
<a id='x11-113012r4'></a><span class='textcolor-2838af'>\endinput</span></pre>

</figure>
<!-- l. 26 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='two-types-of-ht-files'><span class='titlemark'>10.3   </span> <a id='x11-11400010.3'></a>Two types of .4ht files</h3>
<!-- l. 31 --><p class='noindent'>A compilation starts by opening tex4ht.sty and loading a fraction of its code. The
main purpose of this phase is to request the loading of the system at a later time (for
instance, upon reaching <code class='texttt'>\begin{document}</code>). The motivation for the late loading is
to allow TeX4ht to collect as much information as possible about the environment
requested by the source file, and help the system reshape that environment with
minimal interference from elsewhere.
</p><!-- l. 38 --><p class='indent'>   The system uses two kinds of (4ht) configuration files. The files of the
first kind mainly seed hooks into the macros loaded by the source file (for
instance, latex.4ht, fontmath.4ht, and article.4ht). The files of the second kind
mainly attach meaning to the hooks (for instance, html4.4ht, unicode.4ht, and
mathml.4ht).
</p><!-- l. 44 --><p class='indent'>   Different source files may request the loading of different style files and in
different orders. The hook seeding files are loaded in response to the loading of the
style files, and in a compatible order. Since the different style files may redefine the
syntax and semantics of macros, TeX4t follows a similar route of defining and
redefining the hooks and their meanings.
</p><!-- l. 50 --><p class='indent'>   The meaning attaching files are normally requested through option names
introduced in the tex4ht.4ht system file. For instance, the mzlatex command refers to
the mozilla option name of tex4ht.4ht, and the oolatex command refers to the ooffice
option name. The user may add option names, and redefine old ones, within a new
file named tex4ht.usr.
</p><!-- l. 56 --><p class='noindent'>
</p>   
<h4 class='subsectionHead' id='inserting-configurable-hooks-for-packages'><span class='titlemark'>10.3.1   </span> <a id='x11-11500010.3.1'></a>Inserting configurable hooks for packages</h4>
<!-- l. 58 --><p class='noindent'>
</p>   
<h4 class='subsectionHead' id='configure-the-hooks-in-output-format-configuration-files'><span class='titlemark'>10.3.2   </span> <a id='x11-11600010.3.2'></a>Configure the hooks in output format configuration files</h4>
                                                                  

                                                                  
<!-- l. 60 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='how-to-add-support-for-a-package-to-the-texht-literate-sources'><span class='titlemark'>10.4   </span> <a id='x11-11700010.4'></a>How to add support for a package to the <code class='texttt'>TeX4ht</code> literate sources</h3>
<!-- l. 62 --><p class='noindent'>To add a proper support for a new package, it is necessary to edit the <code class='texttt'>TeX4ht</code> literate
sources. The configurable hooks need to be placed in the <code class='texttt'>tex4ht-4ht.tex</code>, the
configuration of these hooks must be added to the output format configuration
files. The most common output format is <code class='texttt'>HTML</code>, which can be configured in
<code class='texttt'>tex4ht-html4.tex</code>, or <code class='texttt'>tex4ht-html5.tex</code> if <code class='texttt'>HTML5</code> features are used. It is also
necessary to update the <code class='texttt'>mktex4ht-cnf.tex</code>.
</p><!-- l. 69 --><p class='noindent'>
</p>   
<h4 class='subsectionHead' id='example'><span class='titlemark'>10.4.1   </span> <a id='x11-11800010.4.1'></a>Example</h4>
<!-- l. 71 --><p class='noindent'>Given following package <code class='texttt'>sample.sty</code>:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb151'><a id='x11-118005r1'></a><span class='textcolor-2838af'>\ProvidesPackage</span><span class='textcolor-387f38'>{</span>sample<span class='textcolor-387f38'>}</span> 
<a id='x11-118007r2'></a><span class='textcolor-2838af'>\newcommand\hello</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}</span> 
<a id='x11-118009r3'></a><span class='textcolor-2838af'>\endinput</span></pre>

</figure>
<!-- l. 79 --><p class='indent'>   This simple package defines command <code class='texttt'>\hello</code>, which simply prints the word
“hello” when used in a document.
</p><!-- l. 81 --><p class='indent'>   Let’s say that we want to insert some <code class='texttt'>HTML</code> tags before and after the text content
printed by the command.
</p><!-- l. 83 --><p class='indent'>   Basic template for <code class='texttt'>tex4ht-4ht.tex</code>
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb152'><a id='x11-118021r1'></a><span class='textcolor-2838af'>\&lt;</span>sample.4ht<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-118023r2'></a><span class='textcolor-878787'><span class='textit'>% sample.4ht (|version), generated from |jobname.tex</span></span> 
<a id='x11-118025r3'></a><span class='textcolor-878787'><span class='textit'>% Copyright 2017 TeX Users Group</span></span> 
<a id='x11-118027r4'></a>|&lt;TeX4ht license text|&gt; 
<a id='x11-118029r5'></a><span class='textcolor-2838af'>\NewConfigure</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}{</span>2<span class='textcolor-387f38'>}</span> 
<a id='x11-118031r6'></a><span class='textcolor-2838af'>\pend</span>:def<span class='textcolor-2838af'>\hello</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\a</span>:hello<span class='textcolor-387f38'>}</span> 
<a id='x11-118033r7'></a><span class='textcolor-2838af'>\append</span>:def<span class='textcolor-2838af'>\hello</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\b</span>:hello<span class='textcolor-387f38'>}</span> 
<a id='x11-118035r8'></a><span class='textcolor-2838af'>\Hinput</span><span class='textcolor-387f38'>{</span>sample<span class='textcolor-387f38'>}</span> 
<a id='x11-118037r9'></a><span class='textcolor-2838af'>\endinput</span> 
<a id='x11-118039r10'></a>&gt;&gt;&gt; <span class='textcolor-2838af'>\AddFile</span><span class='textcolor-387f38'>{</span>9<span class='textcolor-387f38'>}{</span>sample<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 99 --><p class='indent'>   Configuration for each package must follow this basic template. The <code class='texttt'>ProTeX</code>
system is used as system for literate programming.
</p><!-- l. 101 --><p class='indent'>   The <span class='obeylines-h'><code class='verb'>\&lt;name\&gt;&lt;&lt;&lt;code&gt;&gt;&gt;</code></span> block defines new macro which can be then
called using <code class='texttt'>|&lt;name|&gt;</code>. The license text is included in the example this way.
In order to generate the <code class='texttt'>sample.4ht</code> file, we need to use <code class='texttt'>sample.4ht</code> as a
name in the code block and command <code class='texttt'>\AddFile{9}{sample}</code> after the block
definition<span class='footnote-mark'><a href='#fn1x11' id='fn1x11-bk'><sup class='textsuperscript'>1</sup></a></span><a id='x11-118040f1'></a>.
</p><!-- l. 106 --><p class='indent'>   Each package configuration must include <code class='texttt'>\Hinput{packagename}</code>, in order to
load the configurations for the package.
</p><!-- l. 108 --><p class='indent'>   The command <code class='texttt'>\NewConfigure{hello}{2}</code> declares new configuration <code class='texttt'>hello</code>,
with two configurable hooks. These hooks are named <code class='texttt'>\a:hello</code> and <code class='texttt'>\b:hello</code>. The
hooks must be inserted into the <code class='texttt'>\hello</code>, which can be easily done using the
<code class='texttt'>\pend:def</code> and <code class='texttt'>\append:def</code> commands. These commands can insert code at the
beginning, respective at the end of the redefined command.
                                                                  

                                                                  
</p><!-- l. 113 --><p class='indent'>   The configuration for <code class='texttt'>HTML</code> must be placed in the <code class='texttt'>tex4ht-html4.tex</code>
file:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb153'><a id='x11-118046r1'></a><span class='textcolor-2838af'>\&lt;</span>configure html4 sample<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-118048r2'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;span class="hello"&gt;<span class='textcolor-387f38'>}}{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;/span&gt;<span class='textcolor-387f38'>}}</span> 
<a id='x11-118050r3'></a><span class='textcolor-2838af'>\Css</span><span class='textcolor-387f38'>{</span>.hello<span class='textcolor-387f38'>{</span>color:red;<span class='textcolor-387f38'>}}</span> 
<a id='x11-118052r4'></a>&gt;&gt;&gt;</pre>

</figure>
<!-- l. 124 --><p class='indent'>   The configuration for a package must be placed in <code class='texttt'>\&lt;configure html4
packagename\&gt;</code> block.
</p><!-- l. 128 --><p class='indent'>   The package name must be also included in <code class='texttt'>mktex4ht-cnf.tex</code>:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb154'><a id='x11-118055r1'></a><span class='textcolor-2838af'>\AddFile</span><span class='textcolor-387f38'>{</span>9<span class='textcolor-387f38'>}{</span>sample<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 134 --><p class='indent'>   The <code class='texttt'>.4ht</code> files can be generated simply using the <code class='texttt'>make</code> command.
</p><!-- l. 136 --><p class='indent'>   The following sample TeX file:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb155'><a id='x11-118062r1'></a><span class='textcolor-2838af'>\documentclass</span><span class='textcolor-387f38'>{</span>article<span class='textcolor-387f38'>}</span> 
<a id='x11-118064r2'></a><span class='textcolor-2838af'>\usepackage</span><span class='textcolor-387f38'>{</span>sample<span class='textcolor-387f38'>}</span> 
<a id='x11-118066r3'></a><span class='textcolor-2838af'>\begin</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span> 
<a id='x11-118068r4'></a>  <span class='textcolor-2838af'>\hello\ </span>world. 
<a id='x11-118070r5'></a><span class='textcolor-2838af'>\end</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 147 --><p class='indent'>   Produces a following <code class='texttt'>HTML</code> code:
</p>   
<figure class='htmlsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb156'><a id='x11-118075r1'></a><span class='textcolor-878787'><span class='textit'>&lt;!--l. 4--&gt;</span></span><span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>p </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>"noindent" </span><span class='textcolor-878787'>&gt;</span> 
<a id='x11-118077r2'></a><span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>span </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>"hello"</span><span class='textcolor-878787'>&gt;</span>hello<span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>span</span><span class='textcolor-878787'>&gt;</span> world. 
<a id='x11-118079r3'></a><span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>p</span><span class='textcolor-878787'>&gt;</span></pre>

</figure>
<!-- l. 156 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='commands-usable-in-the-ht-files'><span class='titlemark'>10.5   </span> <a id='x11-11900010.5'></a>Commands Usable in the <code class='texttt'>.4ht</code> files</h3>
<!-- l. 168 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='protex'><span class='titlemark'>10.6   </span> <a id='x11-12000010.6'></a>ProTeX</h3>
<!-- l. 171 --><p class='noindent'>The literate programming system used in the previous section is called ProTeX. We
should discuss some main ideas behind this system.
                                                                  

                                                                  
</p><!-- l. 173 --><p class='noindent'>
</p>   
<h4 class='subsectionHead' id='protex1'><span class='titlemark'>10.6.1   </span> <a id='x11-12100010.6.1'></a>ProTeX</h4>
<!-- l. 178 --><p class='noindent'>Literate programming is a discipline that promotes the writing of programs the way
one explains them to human beings. ProTeX is a literate programming system fully
implemented in terms of TeX, and it is compatible with LaTeX and other TeX-base
systems. TeX4ht, and ProTeX itself, are examples of applications written in
ProTeX.
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb157'><a id='x11-121009r1'></a><span class='textcolor-2838af'>\input</span> ProTex.sty 
<a id='x11-121011r2'></a><span class='textcolor-2838af'>\AlProTex</span><span class='textcolor-387f38'>{</span>extension,&lt;&lt;&lt;&gt;&gt;&gt;,list,title,escape-character<span class='textcolor-387f38'>}</span> 
<a id='x11-121013r3'></a><span class='textcolor-2838af'>\&lt;</span>title<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-121015r4'></a>code fragment 
<a id='x11-121017r5'></a>&gt;&gt;&gt; 
<a id='x11-121019r6'></a>|&lt;title|&gt; 
<a id='x11-121021r7'></a><span class='textcolor-2838af'>\OutputCode\&lt;</span>...<span class='textcolor-2838af'>\&gt;</span></pre>

</figure>
<!-- l. 195 --><p class='indent'>   Some explanation:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb158'><a id='x11-121025r1'></a><span class='textcolor-2838af'>\input</span> ProTex.sty 
<a id='x11-121027r2'></a><span class='textcolor-2838af'>\AlProTex</span><span class='textcolor-387f38'>{</span>extension,&lt;&lt;&lt;&gt;&gt;&gt;,list,title,escape-character<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 202 --><p class='indent'>   The escape-character stands for ‘, @, |, or ?. If omitted, it stands for
<span class='obeylines-h'><code class='verb'>\</code></span>.
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb159'><a id='x11-121033r1'></a><span class='textcolor-2838af'>\&lt;</span>title<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-121035r2'></a>code fragment 
<a id='x11-121037r3'></a>&gt;&gt;&gt; 
<a id='x11-121039r4'></a></pre>

</figure>
<!-- l. 211 --><p class='indent'>   This structure provides names to code fragments (the fragments should not be
too large in size).
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb160'><a id='x11-121042r1'></a> |&lt;title|&gt;</pre>

</figure>
<!-- l. 218 --><p class='indent'>   This command acts as a place holder for the code segment associated to the title
(<code class='texttt'>|</code> stands for the escape character).
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb161'><a id='x11-121045r1'></a>   <span class='textcolor-2838af'>\OutputCode\&lt;</span>...<span class='textcolor-2838af'>\&gt;</span></pre>

</figure>
<!-- l. 224 --><p class='indent'>   This command creates a file for the code whose root node is specified.
                                                                  

                                                                  
</p>   
<nav class='crosslinks-bottom'>[<a href='FAQandTroubleshooting.html'>prev</a>] [<a href='tex4ht-doc.html#ForDevelopers.html'>up</a>] [<a href='Glossary.html'>next</a>] </nav>  </main><p><script data-goatcounter='https://kodymirus.goatcounter.com/count' src='/js/libs/goatcounter.js'></script></p> 
<div class='footnotes'><!-- l. 104 --><p class='indent'>     <span class='footnote-mark'><a href='#fn1x11-bk' id='fn1x11'><sup class='textsuperscript'>1</sup></a></span><span class='ec-lmr-8'>I have no idea what the number in the first parameter means.</span></p>                              </div>
 
</body> 
</html>