<!DOCTYPE html> 
<html lang='en' xml:lang='en'> 
<head><title>10 For Developers</title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='tex4ht-doc.css' rel='stylesheet' type='text/css' /> 
<meta content='tex4ht-doc.tex' name='src' /> 
<link href='style.css' rel='stylesheet' type='text/css' /> 
</head><body>
<nav class='TOC'>   
<span class='chapterToc'>1 <a href='Introduction.html#introduction'>Introduction</a></span>

<span class='chapterToc'>2 <a href='BasicTutorial.html#basic-tutorial'>Basic Tutorial</a></span>








<span class='chapterToc'>3 <a href='Howto.html#how-to'>How to</a></span>






















<span class='chapterToc'>4 <a href='CallingCommands.html#calling-commands'>Calling Commands</a></span>







<span class='chapterToc'>5 <a href='OutputFormats.html#output-formats'>Output Formats</a></span>
<span class='chapterToc'>6 <a href='texfourhtOptions.html#-texht-options1'><code class='texttt'>TeX4ht</code> Options</a></span>
                                                                  

                                                                  


<span class='chapterToc'>7 <a href='Configurations.html#configurations2'>Configurations</a></span>











































                                                                  

                                                                  



<span class='chapterToc'>8 <a href='Make4htBuildFiles.html#makeht-build-files'>Make4ht Build Files</a></span>



<span class='chapterToc'>9 <a href='FAQandTroubleshooting.html#faq-and-troubleshooting'>FAQ and Troubleshooting</a></span>





<span class='chapterToc'>10 <a href='#for-developers'>For Developers</a></span>
<span class='sectionToc'>10.1 <a href='#tutorial-basic-support-for-a-new-package'>Tutorial: Basic Support For a New Package</a></span>
<span class='sectionToc'>10.2 <a href='#commands-usable-in-the-ht-files'>Commands Usable in the <code class='texttt'>.4ht</code> files</a></span>
<span class='sectionToc'>10.3 <a href='#two-types-of-ht-files'>Two types of .4ht files</a></span>
<span class='sectionToc'>10.4 <a href='#-texht-literate-sources'><code class='texttt'>TeX4ht</code> literate sources</a></span>
<span class='subsectionToc'>10.4.1 <a href='#how-to-add-support-for-a-package-to-the-texht-literate-sources'>How to add support for a package to the <code class='texttt'>TeX4ht</code> literate sources</a></span>
<span class='sectionToc'>10.5 <a href='#protex'>ProTeX</a></span>
<span class='chapterToc'>11 <a href='Glossary.html#glossary'>Glossary</a></span>
<span class='chapterToc'>12 <a href='Bibliography.html#bibliography'>Bibliography</a></span>
<span class='chapterToc'>13 <a href='Index.html#index'>Index</a></span>
<span class='chapterToc'>14 <a href='Changes.html#changes'>Changes</a></span>
 
   
</nav> 
<main class='main-content'> 
<nav class='crosslinks-top'> [<a href='FAQandTroubleshooting.html'>prev</a>] [<a href='tex4ht-doc.html#ForDevelopers.html'>up</a>] [<a href='Glossary.html'>next</a>] </nav> 
<h2 class='chapterHead' id='for-developers'><span class='titlemark'>Chapter 10</span><br /><a id='x11-11100010'></a>For Developers</h2>
This chapter deals with <code class='texttt'>TeX4ht</code> development. It starts with a basic tutorial for a
new package support, shows commands useful in the process, different types of
<code class='texttt'>TeX4ht</code> configuration files, and the syntax and structure of literate source
files.
<h3 class='sectionHead' id='tutorial-basic-support-for-a-new-package'><span class='titlemark'>10.1   </span> <a id='x11-11200010.1'></a>Tutorial: Basic Support For a New Package</h3>
<!-- l. 10 --><p class='noindent'>In this tutorial, we will try to show how to provide <code class='texttt'>TeX4ht</code> support for a simple
LaTeX package.
</p><!-- l. 14 --><p class='indent'>   <code class='texttt'>TeX4ht</code> tries to load a special <code class='texttt'>.4ht</code> file for each package loaded by LaTeX. This
special file can contain modifications to commands provided by the package, like
redefinitions of macros that cause clashes between the package and <code class='texttt'>TeX4ht</code>, and most
importantly they insert special macros, called hooks, that are then used to include
the output format tags.
</p><!-- l. 19 --><p class='indent'>   Let’s say that you have a custom package, called <code class='texttt'>mynote.sty</code>
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb156'><a id='x11-112006r1'></a><span class='textcolor-2838af'>\newcommand\notetitle</span><span class='textcolor-387f38'>{</span>Note:~<span class='textcolor-387f38'>}</span> 
<a id='x11-112008r2'></a><span class='textcolor-2838af'>\newcommand\note</span><span class='textcolor-387f38'>[1]{</span><span class='textcolor-2838af'>\textbf</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\notetitle</span><span class='textcolor-387f38'>}</span>#1<span class='textcolor-387f38'>}</span> 
<a id='x11-112010r3'></a><span class='textcolor-2838af'>\newcommand\highlight</span><span class='textcolor-387f38'>[1]{</span><span class='textcolor-2838af'>\textbf</span><span class='textcolor-387f38'>{</span>#1<span class='textcolor-387f38'>}}</span> 
<a id='x11-112012r4'></a><span class='textcolor-2838af'>\endinput</span></pre>
                                                                  

                                                                  

</figure>
<!-- l. 28 --><p class='indent'>   It defines two user commands, <span class='textbf'><code class='texttt'>\note</code></span> and <span class='textbf'><code class='texttt'>\highlight</code></span>. They can be used in the
following way:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb157'><a id='x11-112021r1'></a><span class='textcolor-2838af'>\documentclass</span><span class='textcolor-387f38'>{</span>article<span class='textcolor-387f38'>}</span> 
<a id='x11-112023r2'></a><span class='textcolor-2838af'>\usepackage</span><span class='textcolor-387f38'>{</span>mynote<span class='textcolor-387f38'>}</span> 
<a id='x11-112025r3'></a><span class='textcolor-2838af'>\begin</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span> 
<a id='x11-112027r4'></a><span class='textcolor-2838af'>\note</span><span class='textcolor-387f38'>{</span>This is a note<span class='textcolor-387f38'>}</span> 
<a id='x11-112029r5'></a> 
<a id='x11-112031r6'></a>Try to highlight <span class='textcolor-2838af'>\highlight</span><span class='textcolor-387f38'>{</span>something<span class='textcolor-387f38'>}</span>. 
<a id='x11-112033r7'></a><span class='textcolor-2838af'>\end</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 42 --><p class='indent'>   <code class='texttt'>TeX4ht</code> produces usable output for both of these commands out of the box,
thanks to the support for TeX fonts. But you may want to use custom HTML tags
instead. To achieve that, you need to insert special commands, called hooks in
<code class='texttt'>TeX4ht</code>, to package commands. These hooks can be then configured to insert tags in
the output format.
</p><!-- l. 48 --><p class='indent'>   To introduce hooks, you need to create a hook seeding configuration file for the
package, called <code class='texttt'>&lt;name&gt;.4ht</code>. For example, to seed hooks for the <code class='texttt'>mynote.sty</code> package,
create file <code class='texttt'>mynote.4ht</code>:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb158'><a id='x11-112047r1'></a><span class='textcolor-2838af'>\NewConfigure</span><span class='textcolor-387f38'>{</span>note<span class='textcolor-387f38'>}{</span>3<span class='textcolor-387f38'>}</span> 
<a id='x11-112049r2'></a> 
<a id='x11-112051r3'></a><span class='textcolor-878787'><span class='textit'>% Use \HLet when you want to completely redefine a command</span></span> 
<a id='x11-112053r4'></a><span class='textcolor-2838af'>\def\:</span>tempa#1<span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\a</span>:note<span class='textcolor-2838af'>\notetitle\b</span>:note~#1<span class='textcolor-2838af'>\c</span>:note<span class='textcolor-387f38'>}</span> 
<a id='x11-112055r5'></a><span class='textcolor-2838af'>\HLet\note\:</span>tempa 
<a id='x11-112057r6'></a> 
<a id='x11-112059r7'></a><span class='textcolor-2838af'>\NewConfigure</span><span class='textcolor-387f38'>{</span>highlight<span class='textcolor-387f38'>}{</span>2<span class='textcolor-387f38'>}</span> 
<a id='x11-112061r8'></a><span class='textcolor-2838af'>\pend</span>:defI<span class='textcolor-2838af'>\highlight</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\a</span>:highlight<span class='textcolor-387f38'>}</span> 
<a id='x11-112063r9'></a><span class='textcolor-2838af'>\append</span>:defI<span class='textcolor-2838af'>\highlight</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\b</span>:highlight<span class='textcolor-387f38'>}</span> 
<a id='x11-112065r10'></a> 
<a id='x11-112067r11'></a><span class='textcolor-2838af'>\Hinput</span><span class='textcolor-387f38'>{</span>mynote<span class='textcolor-387f38'>}</span> 
<a id='x11-112069r12'></a><span class='textcolor-2838af'>\endinput</span></pre>

</figure>
<!-- l. 67 --><p class='indent'>   There is several things to note. First is that the <span class='obeylines-h'><code class='verb'>:</code></span> character can formt part of a
command name in <code class='texttt'>.4ht</code> files. It is similar to use of the <span class='obeylines-h'><code class='verb'>@</code></span> character in LaTeX
packages. It allows us to create command names that don’t clash with other
command names.
</p><!-- l. 72 --><p class='indent'>   The hooks are created using the <span class='textbf'><code class='texttt'>\NewConfigure</code></span> command. They can be later
filled with the <span class='textbf'><code class='texttt'>\Configure</code></span> command. To have an effect, hooks must be
inserted to the existing commands. There are two ways how to do that. For
simpler commands, where we want to insert tags only before and after the
contents produced by the patched command, we can use the <span class='textbf'><code class='texttt'>\pend:def&lt;X&gt;</code></span> and
<span class='textbf'><code class='texttt'>\append:def&lt;X&gt;</code></span> commands, where the <span class='obeylines-h'><code class='verb'>&lt;X&gt;</code></span> is a roman number of parameters that
the patched command expects. In this example, it expects one parameter, so we
can use the <span class='textbf'><code class='texttt'>\pend:defI</code></span> command. For commands without parameters, use
<span class='textbf'><code class='texttt'>\pend:def</code></span>.
</p><!-- l. 82 --><p class='indent'>   Of course, you can also insert hooks using other mechanisms, for example using
LaTeX’s hook system:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb159'><a id='x11-112073r1'></a><span class='textcolor-2838af'>\AddToHook</span><span class='textcolor-387f38'>{</span>cmd/highlight/before<span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\a</span>:highlight<span class='textcolor-387f38'>}</span> 
<a id='x11-112075r2'></a><span class='textcolor-2838af'>\AddToHook</span><span class='textcolor-387f38'>{</span>cmd/highlight/after<span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\b</span>:highlight<span class='textcolor-387f38'>}</span></pre>

</figure>
                                                                  

                                                                  
<!-- l. 90 --><p class='indent'>   The second way for hook insertion, useful for commands where we want to insert
tags also inside it’s contents, we can use the <span class='textbf'><code class='texttt'>\HLet</code></span> command. It is a variant of
the <span class='textbf'><code class='texttt'>\let</code></span> command. In contrast to <span class='textbf'><code class='texttt'>\let</code></span>, it saves the original command as
<span class='textbf'><code class='texttt'>\o:&lt;command name&gt;:</code></span>. Commands redefined by <span class='textbf'><code class='texttt'>\HLet</code></span> also support the <span class='textbf'><code class='texttt'>\Picture</code></span>
command, where the original version of the command will be used. This way,
pictures will produce the same result as they would produce in the PDF
mode.
</p><!-- l. 98 --><p class='indent'>   In our example, we redefined the <span class='textbf'><code class='texttt'>\note</code></span> command to use a hook between
note title and note text. This enables us to style both the title and the text
differently.
</p><!-- l. 102 --><p class='indent'>   The configuration file for our hooks could look like this:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb160'><a id='x11-112088r1'></a><span class='textcolor-2838af'>\Preamble</span><span class='textcolor-387f38'>{</span>xhtml<span class='textcolor-387f38'>}</span> 
<a id='x11-112090r2'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>note<span class='textcolor-387f38'>}</span> 
<a id='x11-112092r3'></a><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\ifvmode\IgnorePar\fi\EndP\HCode</span><span class='textcolor-387f38'>{</span>&lt;div class="note"&gt;&lt;span class="notetitle"&gt;<span class='textcolor-387f38'>}}</span> 
<a id='x11-112094r4'></a><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;/span&gt;&lt;span class="notebody"&gt;<span class='textcolor-387f38'>}}</span> 
<a id='x11-112096r5'></a><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;/span&gt;&lt;/div&gt;<span class='textcolor-387f38'>}}</span> 
<a id='x11-112098r6'></a><span class='textcolor-2838af'>\Css</span><span class='textcolor-387f38'>{</span>.notetitle<span class='textcolor-387f38'>{</span>font-weight: bold;<span class='textcolor-387f38'>}}</span> 
<a id='x11-112100r7'></a> 
<a id='x11-112102r8'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>highlight<span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;span class="highlight"&gt;<span class='textcolor-387f38'>}</span><span class='textcolor-2838af'>\NoFonts</span><span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\EndNoFonts\HCode</span><span class='textcolor-387f38'>{</span>&lt;/span&gt;<span class='textcolor-387f38'>}}</span> 
<a id='x11-112104r9'></a><span class='textcolor-2838af'>\Css</span><span class='textcolor-387f38'>{</span>.highlight<span class='textcolor-387f38'>{</span>font-weight:bold;<span class='textcolor-387f38'>}}</span> 
<a id='x11-112106r10'></a><span class='textcolor-2838af'>\begin</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span> 
<a id='x11-112108r11'></a><span class='textcolor-2838af'>\EndPreamble</span></pre>

</figure>
<!-- l. 118 --><p class='indent'>   As the <span class='textbf'><code class='texttt'>\note</code></span> command should be used on it’s own paragraph, we need to fix
paragraph closing. See the <a href='Configurations.html#paragraph-handling'>Paragraph Handling<!-- tex4ht:ref: sec:paragraph_handling  --></a> section for more information about
this issue. More details about configuration files and configurations are in section
<a href='Configurations.html#private-configuration-files'>Private Configuration Files<!-- tex4ht:ref: sec:private-configuration  --></a>.
</p><!-- l. 123 --><p class='indent'>   The HTML code produced by our configuration looks like this:
</p>   
<figure class='htmlsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb161'><a id='x11-112113r1'></a><span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>div </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>'note'</span><span class='textcolor-878787'>&gt;&lt;</span><span class='textcolor-2838af'>span </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>'notetitle'</span><span class='textcolor-878787'>&gt;</span>Note: <span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>span</span><span class='textcolor-878787'>&gt;&lt;</span><span class='textcolor-2838af'>span </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>'notebody'</span><span class='textcolor-878787'>&gt;</span> This is a note<span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>span</span><span class='textcolor-878787'>&gt;&lt;/</span><span class='textcolor-2838af'>div</span><span class='textcolor-878787'>&gt;</span> 
<a id='x11-112115r2'></a><span class='textcolor-878787'><span class='textit'>&lt;!--  l. 6  --&gt;</span></span><span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>p </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>'indent'</span><span class='textcolor-878787'>&gt;</span>   Try to highlight <span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>span </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>'highlight'</span><span class='textcolor-878787'>&gt;</span>something<span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>span</span><span class='textcolor-878787'>&gt;</span>. 
<a id='x11-112117r3'></a><span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>p</span><span class='textcolor-878787'>&gt;</span></pre>

</figure>
<!-- l. 132 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='commands-usable-in-the-ht-files'><span class='titlemark'>10.2   </span> <a id='x11-11300010.2'></a>Commands Usable in the <code class='texttt'>.4ht</code> files</h3>
<!-- l. 134 --><p class='noindent'><code class='texttt'><span class='textbf'>\NewConfigure</span></code>{<span class='textit'>name</span>}{<span class='textit'>number of defined hooks</span>}
</p><!-- l. 136 --><p class='indent'>   This command defines macros with an alphabetic prefix in the form of <span class='textbf'><code class='texttt'>\a:name</code></span>
…<span class='textbf'><code class='texttt'>\i:name</code></span>, depending on the number of defined hooks. The maximum number is
9.
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb162'><a id='x11-113007r1'></a><span class='textcolor-2838af'>\NewConfigure</span><span class='textcolor-387f38'>{</span>try<span class='textcolor-387f38'>}{</span>2<span class='textcolor-387f38'>}</span> 
<a id='x11-113009r2'></a><span class='textcolor-2838af'>\def\try</span>#1<span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\a</span>:try#1<span class='textcolor-2838af'>\b</span>:try<span class='textcolor-387f38'>}</span> 
<a id='x11-113011r3'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>try<span class='textcolor-387f38'>}{</span>* <span class='textcolor-387f38'>}{}</span> 
<a id='x11-113013r4'></a><span class='textcolor-2838af'>\try</span><span class='textcolor-387f38'>{</span>ho<span class='textcolor-387f38'>}</span> 
<a id='x11-113015r5'></a><span class='textcolor-878787'><span class='textit'>% produces "* ho"</span></span></pre>
                                                                  

                                                                  

</figure>
<!-- l. 148 --><p class='noindent'><code class='texttt'><span class='textbf'>\NewConfigure</span></code>{<span class='textit'>name</span>}[<span class='textit'>number or parameters</span>]{<span class='textit'>code</span>}
</p><!-- l. 150 --><p class='indent'>   Variant of <span class='textbf'><code class='texttt'>\NewConfigure</code></span> that doesn’t define hooks with alphabetic
prefixes, but it passes argumens of <span class='textbf'><code class='texttt'>\Configure</code></span> as TeX arguments. See this
exampe:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb163'><a id='x11-113022r1'></a><span class='textcolor-2838af'>\NewConfigure</span><span class='textcolor-387f38'>{</span>try<span class='textcolor-387f38'>}</span>[2]<span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\def\hookI</span><span class='textcolor-387f38'>{</span>#1<span class='textcolor-387f38'>}</span><span class='textcolor-2838af'>\def\hookII</span><span class='textcolor-387f38'>{</span>#2<span class='textcolor-387f38'>}}</span> 
<a id='x11-113024r2'></a><span class='textcolor-2838af'>\def\try</span>#1<span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\hookI</span>#1<span class='textcolor-2838af'>\hookII</span><span class='textcolor-387f38'>}</span> 
<a id='x11-113026r3'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>try<span class='textcolor-387f38'>}{</span>* <span class='textcolor-387f38'>}{}</span> 
<a id='x11-113028r4'></a><span class='textcolor-2838af'>\try</span><span class='textcolor-387f38'>{</span>ho<span class='textcolor-387f38'>}</span> 
<a id='x11-113030r5'></a><span class='textcolor-878787'><span class='textit'>% produces "* ho"</span></span></pre>

</figure>
<!-- l. 162 --><p class='indent'>   When you use <code class='texttt'>\Configure{try}</code>, it defines <span class='textbf'><code class='texttt'>\hookI</code></span> and <span class='textbf'><code class='texttt'>\hookII</code></span> commands.
They can be then used in the redefined <span class='textbf'><code class='texttt'>\try</code></span> command.
</p><!-- l. 165 --><p class='noindent'><code class='texttt'><span class='textbf'>\HLet</span></code>{<span class='textit'>Redefined command name</span>}{<span class='textit'>new command</span>}
</p><!-- l. 167 --><p class='indent'>   Variant of <span class='textbf'><code class='texttt'>\let</code></span> that saves the original command under <span class='textbf'><code class='texttt'>\ø:&lt;name&gt;:</code></span>
name. It can detect use of the redefined command inside picture. In such
case, it will use the original command to produce correct visual result in the
picture.
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb164'><a id='x11-113037r1'></a><span class='textcolor-2838af'>\def\:</span>tempa#1<span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\a</span>:note note:<span class='textcolor-2838af'>\b</span>:note~#1<span class='textcolor-2838af'>\c</span>:note<span class='textcolor-387f38'>}</span> 
<a id='x11-113039r2'></a><span class='textcolor-2838af'>\HLet\note\:</span>tempa 
<a id='x11-113041r3'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>note<span class='textcolor-387f38'>}{</span>*<span class='textcolor-387f38'>}{</span>*<span class='textcolor-387f38'>}{</span>*<span class='textcolor-387f38'>}</span> 
<a id='x11-113043r4'></a><span class='textcolor-2838af'>\note</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}</span> 
<a id='x11-113045r5'></a><span class='textcolor-878787'><span class='textit'>% produces: "* note:* hello*</span></span></pre>

</figure>
<!-- l. 179 --><p class='noindent'><code class='texttt'><span class='textbf'>\HRestore</span></code>{<span class='textit'>command name</span>}
</p><!-- l. 181 --><p class='indent'>   Restore command redefined using <span class='textbf'><code class='texttt'>\HLet</code></span> to it’s original content.
</p><!-- l. 183 --><p class='noindent'><code class='texttt'><span class='textbf'>\pend:def&lt;X&gt;</span></code>{<span class='textit'>redefined command</span>}{<span class='textit'>code to be inserted at the begin</span>}
</p><!-- l. 185 --><p class='noindent'><code class='texttt'><span class='textbf'>\append:def&lt;X&gt;</span></code>{<span class='textit'>redefined command</span>}{<span class='textit'>code to be inserted at the end</span>}
</p><!-- l. 199 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='two-types-of-ht-files'><span class='titlemark'>10.3   </span> <a id='x11-11400010.3'></a>Two types of .4ht files</h3>
<!-- l. 204 --><p class='noindent'>The compilation starts by opening tex4ht.sty and loading a fraction of its code. The
main purpose of this phase is to request the loading of the system at a later time (for
instance, upon reaching <code class='texttt'>\begin{document}</code>). The motivation for the late loading is
to allow TeX4ht to collect as much information as possible about the environment
requested by the source file, and help the system reshape that environment with
minimal interference from elsewhere.
                                                                  

                                                                  
</p><!-- l. 211 --><p class='indent'>   The system uses two kinds of (4ht) configuration files. The files of the first kind
mainly seed hooks into the macros loaded by the source file (for instance,
<code class='texttt'>latex.4ht</code>, <code class='texttt'>fontmath.4ht</code>, and <code class='texttt'>article.4ht</code>). The files of the second kind mainly
attach meaning to the hooks (for instance, <code class='texttt'>html4.4ht</code>, <code class='texttt'>unicode.4ht</code>, and
<code class='texttt'>mathml.4ht</code>).
</p><!-- l. 218 --><p class='indent'>   Different source files may request the loading of different style files and in
different orders. The hook seeding files are loaded in response to the loading of the
style files, and in a compatible order. Since the different style files may redefine the
syntax and semantics of macros, <code class='texttt'>TeX4ht</code> follows a similar route of defining and
redefining the hooks and their meanings.
</p><!-- l. 224 --><p class='indent'>   The meaning attaching files are normally requested through option names
introduced in the <code class='texttt'>tex4ht.4ht</code> system file. It defines options for all output formats
supported by <code class='texttt'>TeX4ht</code>. For instance, <span class='emph'>html5</span>, <span class='emph'>ooffice</span> for the ODT output, <span class='emph'>tei</span>, and so
on.
</p><!-- l. 233 --><p class='indent'>   The user may add option names, and redefine old ones, within a new file named
tex4ht.usr.
</p><!-- l. 242 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='-texht-literate-sources'><span class='titlemark'>10.4   </span> <a id='x11-11500010.4'></a><code class='texttt'>TeX4ht</code> literate sources</h3>
<!-- l. 244 --><p class='noindent'>To add a proper support for a new package, it is necessary to edit the <code class='texttt'>TeX4ht</code> literate
sources. The source files are available in the <a href='https://puszcza.gnu.org.ua/projects/tex4ht/'><code class='texttt'>TeX4ht</code> source repository</a>. You can
retrieve them using a SVN client.
</p>   
<figure class='shellcommand' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb165'><a id='x11-115004r1'></a>$ svn checkout https://svn.gnu.org.ua/sources/tex4ht/ 
<a id='x11-115006r2'></a>$ <span class='textcolor-387f38'>cd</span> tex4ht/trunk/lit/</pre>

</figure>
<!-- l. 255 --><p class='indent'>   The configurable hooks for all packages are contained by the <code class='texttt'>tex4ht-4ht.tex</code> file.
Configurations of these hooks is placed in the output format configuration files. The
most common output format is <code class='texttt'>HTML</code>, which can be configured in <code class='texttt'>tex4ht-html4.tex</code>,
or <code class='texttt'>tex4ht-html5.tex</code> if <code class='texttt'>HTML5</code> features are used. You can also update sources for
other output formats, for example <code class='texttt'>tex4th-ooffice.tex</code> for the ODT format, or
<code class='texttt'>tex4ht-tei.tex</code> for TEI. The sources of the <code class='texttt'>tex4ht.sty</code> package are available in
<code class='texttt'>tex4ht-sty.tex</code>.
</p><!-- l. 262 --><p class='indent'>   To compile all literate sources, run the <code class='texttt'>make</code> command. You will need basic UNIX
utilities for this to succeed, as well as <code class='texttt'>m4</code> and <code class='texttt'>javac</code>. You can also compile
particular source files. Most of them can be compiled using LaTeX, but
some of them, for example <code class='texttt'>tex4ht-4ht.tex</code>, needs to be compiled using
<code class='texttt'>etex</code>.
                                                                  

                                                                  
</p><!-- l. 267 --><p class='noindent'>
</p>   
<h4 class='subsectionHead' id='how-to-add-support-for-a-package-to-the-texht-literate-sources'><span class='titlemark'>10.4.1   </span> <a id='x11-11600010.4.1'></a>How to add support for a package to the <code class='texttt'>TeX4ht</code> literate sources</h4>
<!-- l. 269 --><p class='noindent'>Given following package <code class='texttt'>sample.sty</code>:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb166'><a id='x11-116005r1'></a><span class='textcolor-2838af'>\ProvidesPackage</span><span class='textcolor-387f38'>{</span>sample<span class='textcolor-387f38'>}</span> 
<a id='x11-116007r2'></a><span class='textcolor-2838af'>\newcommand\hello</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}</span> 
<a id='x11-116009r3'></a><span class='textcolor-2838af'>\endinput</span></pre>

</figure>
<!-- l. 277 --><p class='indent'>   This simple package defines command <code class='texttt'>\hello</code>, which simply prints the word
“hello” when used in a document.
</p><!-- l. 279 --><p class='indent'>   Let’s say that we want to insert some <code class='texttt'>HTML</code> tags before and after the text content
printed by the command.
</p><!-- l. 281 --><p class='indent'>   Basic template for <code class='texttt'>tex4ht-4ht.tex</code>:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb167'><a id='x11-116021r1'></a><span class='textcolor-2838af'>\&lt;</span>sample.4ht<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-116023r2'></a><span class='textcolor-878787'><span class='textit'>% sample.4ht (|version), generated from |jobname.tex</span></span> 
<a id='x11-116025r3'></a><span class='textcolor-878787'><span class='textit'>% Copyright 2017 TeX Users Group</span></span> 
<a id='x11-116027r4'></a>|&lt;TeX4ht license text|&gt; 
<a id='x11-116029r5'></a><span class='textcolor-2838af'>\NewConfigure</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}{</span>2<span class='textcolor-387f38'>}</span> 
<a id='x11-116031r6'></a><span class='textcolor-2838af'>\pend</span>:def<span class='textcolor-2838af'>\hello</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\a</span>:hello<span class='textcolor-387f38'>}</span> 
<a id='x11-116033r7'></a><span class='textcolor-2838af'>\append</span>:def<span class='textcolor-2838af'>\hello</span><span class='textcolor-387f38'>{</span><span class='textcolor-2838af'>\b</span>:hello<span class='textcolor-387f38'>}</span> 
<a id='x11-116035r8'></a><span class='textcolor-2838af'>\Hinput</span><span class='textcolor-387f38'>{</span>sample<span class='textcolor-387f38'>}</span> 
<a id='x11-116037r9'></a><span class='textcolor-2838af'>\endinput</span> 
<a id='x11-116039r10'></a>&gt;&gt;&gt; <span class='textcolor-2838af'>\AddFile</span><span class='textcolor-387f38'>{</span>9<span class='textcolor-387f38'>}{</span>sample<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 297 --><p class='indent'>   Configuration for each package must follow this basic template. The <code class='texttt'>ProTeX</code>
system is used as system for literate programming.
</p><!-- l. 299 --><p class='indent'>   The <span class='obeylines-h'><code class='verb'>\&lt;name\&gt;&lt;&lt;&lt;code&gt;&gt;&gt;</code></span> block defines new macro which can be then called
using <code class='texttt'>|&lt;name|&gt;</code>. The license text is included in this way in the example. The
instruction to generate the <code class='texttt'>.4ht</code> file is given in the command <code class='texttt'>\AddFile{9}{sample}</code>
after the block definition. The first argument to <span class='textbf'><code class='texttt'>\AddFile</code></span> is an arbitrary
number.
</p><!-- l. 304 --><p class='indent'>   Each package configuration must include <code class='texttt'>\Hinput{packagename}</code>, in order to
load the configurations for the package.
</p><!-- l. 306 --><p class='indent'>   The command <code class='texttt'>\NewConfigure{hello}{2}</code> declares new configuration <code class='texttt'>hello</code>,
with two configurable hooks. These hooks are named <code class='texttt'>\a:hello</code> and <code class='texttt'>\b:hello</code>. The
hooks must be inserted into the <code class='texttt'>\hello</code>, which can be easily done using the
<code class='texttt'>\pend:def</code> and <code class='texttt'>\append:def</code> commands. These commands can insert code at the
beginning, respective at the end of the redefined command.
</p><!-- l. 311 --><p class='indent'>   The package name must be also included in the <code class='texttt'>mktex4ht-cnf.tex</code> file. This file
is used in the generation of the
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb168'><a id='x11-116042r1'></a><span class='textcolor-2838af'>\AddFile</span><span class='textcolor-387f38'>{</span>9<span class='textcolor-387f38'>}{</span>sample<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 317 --><p class='indent'>   You can place configuration for <code class='texttt'>HTML</code> to the <code class='texttt'>tex4ht-html4.tex</code> file:
</p>
                                                                  

                                                                  
<figure class='texsource' role='doc-example'>   
<pre class='fancyvrb' id='fancyvrb169'><a id='x11-116048r1'></a><span class='textcolor-2838af'>\&lt;</span>configure html4 sample<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-116050r2'></a><span class='textcolor-2838af'>\Configure</span><span class='textcolor-387f38'>{</span>hello<span class='textcolor-387f38'>}{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;span class="hello"&gt;<span class='textcolor-387f38'>}}{</span><span class='textcolor-2838af'>\HCode</span><span class='textcolor-387f38'>{</span>&lt;/span&gt;<span class='textcolor-387f38'>}}</span> 
<a id='x11-116052r3'></a><span class='textcolor-2838af'>\Css</span><span class='textcolor-387f38'>{</span>.hello<span class='textcolor-387f38'>{</span>color:red;<span class='textcolor-387f38'>}}</span> 
<a id='x11-116054r4'></a>&gt;&gt;&gt;</pre>

</figure>
<!-- l. 327 --><p class='indent'>   The <code class='texttt'>\&lt;configure html4 packagename\&gt;</code> block will produce code that
detects use of the package <code class='texttt'>packagename</code>. It then loads configurations for the
package.
</p><!-- l. 332 --><p class='indent'>   The <code class='texttt'>.4ht</code> files can be generated simply using the <code class='texttt'>make</code> command.
</p><!-- l. 334 --><p class='indent'>   The following sample TeX file:
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb170'><a id='x11-116061r1'></a><span class='textcolor-2838af'>\documentclass</span><span class='textcolor-387f38'>{</span>article<span class='textcolor-387f38'>}</span> 
<a id='x11-116063r2'></a><span class='textcolor-2838af'>\usepackage</span><span class='textcolor-387f38'>{</span>sample<span class='textcolor-387f38'>}</span> 
<a id='x11-116065r3'></a><span class='textcolor-2838af'>\begin</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span> 
<a id='x11-116067r4'></a>  <span class='textcolor-2838af'>\hello\ </span>world. 
<a id='x11-116069r5'></a><span class='textcolor-2838af'>\end</span><span class='textcolor-387f38'>{</span>document<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 345 --><p class='indent'>   Produces a following <code class='texttt'>HTML</code> code:
</p>   
<figure class='htmlsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb171'><a id='x11-116074r1'></a><span class='textcolor-878787'><span class='textit'>&lt;!--l. 4--&gt;</span></span><span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>p </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>"noindent" </span><span class='textcolor-878787'>&gt;</span> 
<a id='x11-116076r2'></a><span class='textcolor-878787'>&lt;</span><span class='textcolor-2838af'>span </span><span class='textcolor-387f38'>class</span><span class='textcolor-656565'>=</span><span class='textcolor-b73838'>"hello"</span><span class='textcolor-878787'>&gt;</span>hello<span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>span</span><span class='textcolor-878787'>&gt;</span> world. 
<a id='x11-116078r3'></a><span class='textcolor-878787'>&lt;/</span><span class='textcolor-2838af'>p</span><span class='textcolor-878787'>&gt;</span></pre>

</figure>
<!-- l. 356 --><p class='noindent'>
</p>   
<h3 class='sectionHead' id='protex'><span class='titlemark'>10.5   </span> <a id='x11-11700010.5'></a>ProTeX</h3>
<!-- l. 359 --><p class='noindent'>The literate programming system used in the previous section is called ProTeX. We
should discuss some main ideas behind this system.
</p><!-- l. 365 --><p class='indent'>   Literate programming is a discipline that promotes the writing of programs the
way one explains them to human beings. ProTeX is a literate programming system
fully implemented in terms of TeX, and it is compatible with LaTeX and other
TeX-base systems. TeX4ht, and ProTeX itself, are examples of applications written in
ProTeX.
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb172'><a id='x11-117009r1'></a><span class='textcolor-2838af'>\input</span> ProTex.sty 
<a id='x11-117011r2'></a><span class='textcolor-2838af'>\AlProTex</span><span class='textcolor-387f38'>{</span>extension,&lt;&lt;&lt;&gt;&gt;&gt;,list,title,escape-character<span class='textcolor-387f38'>}</span> 
<a id='x11-117013r3'></a><span class='textcolor-2838af'>\&lt;</span>title<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-117015r4'></a>code fragment 
<a id='x11-117017r5'></a>&gt;&gt;&gt; 
<a id='x11-117019r6'></a>|&lt;title|&gt; 
<a id='x11-117021r7'></a><span class='textcolor-2838af'>\OutputCode\&lt;</span>...<span class='textcolor-2838af'>\&gt;</span></pre>

</figure>
<!-- l. 382 --><p class='indent'>   Some explanation:
</p>   
<figure class='texsource' role='doc-example'>
                                                                  

                                                                  
<pre class='fancyvrb' id='fancyvrb173'><a id='x11-117025r1'></a><span class='textcolor-2838af'>\input</span> ProTex.sty 
<a id='x11-117027r2'></a><span class='textcolor-2838af'>\AlProTex</span><span class='textcolor-387f38'>{</span>extension,&lt;&lt;&lt;&gt;&gt;&gt;,list,title,escape-character<span class='textcolor-387f38'>}</span></pre>

</figure>
<!-- l. 389 --><p class='indent'>   The escape-character stands for ‘, @, |, or ?. If omitted, it stands for
<span class='obeylines-h'><code class='verb'>|</code></span>.
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb174'><a id='x11-117033r1'></a><span class='textcolor-2838af'>\&lt;</span>title<span class='textcolor-2838af'>\&gt;</span>&lt;&lt;&lt; 
<a id='x11-117035r2'></a>code fragment 
<a id='x11-117037r3'></a>&gt;&gt;&gt; 
<a id='x11-117039r4'></a></pre>

</figure>
<!-- l. 398 --><p class='indent'>   This structure provides names to code fragments (the fragments should not be
too large in size).
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb175'><a id='x11-117042r1'></a> |&lt;title|&gt;</pre>

</figure>
<!-- l. 405 --><p class='indent'>   This command acts as a place holder for the code segment associated to the title
(<code class='texttt'>|</code> stands for the escape character).
</p>   
<figure class='texsource' role='doc-example'>
<pre class='fancyvrb' id='fancyvrb176'><a id='x11-117045r1'></a>   <span class='textcolor-2838af'>\OutputCode\&lt;</span>...<span class='textcolor-2838af'>\&gt;</span></pre>

</figure>
<!-- l. 411 --><p class='indent'>   This command creates a file for the code whose root node is specified.
                                                                  

                                                                  
</p>   
<nav class='crosslinks-bottom'>[<a href='FAQandTroubleshooting.html'>prev</a>] [<a href='tex4ht-doc.html#ForDevelopers.html'>up</a>] [<a href='Glossary.html'>next</a>] </nav>  </main><p><script data-goatcounter='https://kodymirus.goatcounter.com/count' src='/js/libs/goatcounter.js'></script></p> 
 
</body> 
</html>